# This script file is owned by SimplyCEO, from repository:
# https://github.com/SimplyCEO/HardSurvivalStrategie
#
# You are allowed to translate, adapt, alter, transform, modify, or arrange it
# according with the OSL-3.0 license.
#
# Thanks for playing!

execute as @e[type=minecraft:player,scores={debug=1,verbose=1}] run tellraw @s "[§2§lFISH TRAP§f] Module§9 hss:blocks/fish_trap/main §floaded."

scoreboard players add waterCount count 1
# Question... why is there a tag check in this recently dropped item?
execute as @e[type=minecraft:item,nbt={Item:{tag:{fishTrap:1b},Count:1b}},tag=!placed] at @s if block ~ ~ ~ minecraft:water if block ~-2 ~-1 ~-2 minecraft:water if block ~-2 ~-1 ~-1 minecraft:water if block ~-2 ~-1 ~ minecraft:water if block ~-2 ~-1 ~1 minecraft:water if block ~-2 ~-1 ~2 minecraft:water if block ~-1 ~-1 ~-2 minecraft:water if block ~-1 ~-1 ~2 minecraft:water if block ~ ~-1 ~-2 minecraft:water if block ~ ~-1 ~2 minecraft:water if block ~1 ~-1 ~-2 minecraft:water if block ~1 ~-1 ~2 minecraft:water if block ~2 ~-1 ~-2 minecraft:water if block ~2 ~-1 ~-1 minecraft:water if block ~2 ~-1 ~ minecraft:water if block ~2 ~-1 ~1 minecraft:water if block ~2 ~-1 ~2 minecraft:water if block ~-2 ~ ~-2 minecraft:water if block ~-2 ~ ~-1 minecraft:water if block ~-2 ~ ~ minecraft:water if block ~-2 ~ ~1 minecraft:water if block ~-2 ~ ~2 minecraft:water if block ~-1 ~ ~-2 minecraft:water if block ~-1 ~ ~2 minecraft:water if block ~ ~ ~-2 minecraft:water if block ~ ~ ~2 minecraft:water if block ~1 ~ ~-2 minecraft:water if block ~1 ~ ~2 minecraft:water if block ~2 ~ ~-2 minecraft:water if block ~2 ~ ~-1 minecraft:water if block ~2 ~ ~ minecraft:water if block ~2 ~ ~1 minecraft:water if block ~2 ~ ~2 minecraft:water if block ~-2 ~1 ~-2 minecraft:water if block ~-2 ~1 ~-1 minecraft:water if block ~-2 ~1 ~ minecraft:water if block ~-2 ~1 ~1 minecraft:water if block ~-2 ~1 ~2 minecraft:water if block ~-1 ~1 ~-2 minecraft:water if block ~-1 ~1 ~2 minecraft:water if block ~ ~1 ~-2 minecraft:water if block ~ ~1 ~2 minecraft:water if block ~1 ~1 ~-2 minecraft:water if block ~1 ~1 ~2 minecraft:water if block ~2 ~1 ~-2 minecraft:water if block ~2 ~1 ~-1 minecraft:water if block ~2 ~1 ~ minecraft:water if block ~2 ~1 ~1 minecraft:water if block ~2 ~1 ~2 minecraft:water align xyz run function hss:block/fish_trap/place
execute as @e[type=minecraft:armor_stand,tag=fish_trap,tag=placed] at @s unless block ~ ~ ~ barrel run function hss:block/fish_trap/remove
execute as @e[type=minecraft:armor_stand,tag=fish_trap,tag=placed] at @s positioned ~-32 ~-32 ~-32 if entity @e[type=player,dx=64,dy=64,dz=64,sort=nearest] at @s if score waterCount count matches 300.. if block ~-2 ~-1 ~-2 minecraft:oak_fence if block ~-2 ~-1 ~-1 minecraft:oak_fence if block ~-2 ~-1 ~ minecraft:oak_fence if block ~-2 ~-1 ~1 minecraft:oak_fence if block ~-2 ~-1 ~2 minecraft:oak_fence if block ~-1 ~-1 ~-2 minecraft:oak_fence if block ~-1 ~-1 ~2 minecraft:oak_fence if block ~ ~-1 ~-2 minecraft:oak_fence if block ~ ~-1 ~2 minecraft:oak_fence if block ~1 ~-1 ~-2 minecraft:oak_fence if block ~1 ~-1 ~2 minecraft:oak_fence if block ~2 ~-1 ~-2 minecraft:oak_fence if block ~2 ~-1 ~-1 minecraft:oak_fence if block ~2 ~-1 ~ minecraft:oak_fence if block ~2 ~-1 ~1 minecraft:oak_fence if block ~2 ~-1 ~2 minecraft:oak_fence if block ~-2 ~ ~-2 minecraft:oak_fence if block ~-2 ~ ~-1 minecraft:oak_fence if block ~-2 ~ ~ minecraft:oak_fence if block ~-2 ~ ~1 minecraft:oak_fence if block ~-2 ~ ~2 minecraft:oak_fence if block ~-1 ~ ~-2 minecraft:oak_fence if block ~-1 ~ ~2 minecraft:oak_fence if block ~ ~ ~-2 minecraft:oak_fence if block ~ ~ ~2 minecraft:oak_fence if block ~1 ~ ~-2 minecraft:oak_fence if block ~1 ~ ~2 minecraft:oak_fence if block ~2 ~ ~-2 minecraft:oak_fence if block ~2 ~ ~-1 minecraft:oak_fence if block ~2 ~ ~ minecraft:oak_fence if block ~2 ~ ~1 minecraft:oak_fence if block ~2 ~ ~2 minecraft:oak_fence if block ~-2 ~1 ~-2 minecraft:oak_fence if block ~-2 ~1 ~-1 minecraft:oak_fence if block ~-2 ~1 ~ minecraft:oak_fence if block ~-2 ~1 ~1 minecraft:oak_fence if block ~-2 ~1 ~2 minecraft:oak_fence if block ~-1 ~1 ~-2 minecraft:oak_fence if block ~-1 ~1 ~2 minecraft:oak_fence if block ~ ~1 ~-2 minecraft:oak_fence if block ~ ~1 ~2 minecraft:oak_fence if block ~1 ~1 ~-2 minecraft:oak_fence if block ~1 ~1 ~2 minecraft:oak_fence if block ~2 ~1 ~-2 minecraft:oak_fence if block ~2 ~1 ~-1 minecraft:oak_fence if block ~2 ~1 ~ minecraft:oak_fence if block ~2 ~1 ~1 minecraft:oak_fence if block ~2 ~1 ~2 minecraft:oak_fence run function hss:block/fish_trap/farm
